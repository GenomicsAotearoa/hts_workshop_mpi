<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="MPI, Genomics Aotearoa &amp; NeSI">
      
      
        <link rel="canonical" href="https://genomicsaotearoa.github.io/hts_workshop_mpi/level2/13_shell_redirection/">
      
      
        <link rel="prev" href="../12_shell_variables/">
      
      
        <link rel="next" href="../14_nesi_environment/">
      
      
      <link rel="icon" href="../../theme_images/icon_fig.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>1.3 - Working with redirection - High Throughput Sequencing</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Mukta";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#13-working-with-redirection" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="High Throughput Sequencing" class="md-header__button md-logo" aria-label="High Throughput Sequencing" data-md-component="logo">
      
  <img src="../../theme_images/icon_fig.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            High Throughput Sequencing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.3 - Working with redirection
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo" aria-label="Switch to system preference" type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/GenomicsAotearoa/hts_workshop_mpi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    GenomicsAotearoa/hts_workshop_mpi
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../level1/11_nesi_connection/" class="md-tabs__link">
          
  
  
  Level1

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../11_shell_manipulation/" class="md-tabs__link">
          
  
  
  Level2

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../proficiency/2023_proficiency/" class="md-tabs__link">
          
  
  
  Proficiency

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../supplementary/common_terms/" class="md-tabs__link">
          
  
  
  Supplementary

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="High Throughput Sequencing" class="md-nav__button md-logo" aria-label="High Throughput Sequencing" data-md-component="logo">
      
  <img src="../../theme_images/icon_fig.png" alt="logo">

    </a>
    High Throughput Sequencing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/GenomicsAotearoa/hts_workshop_mpi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    GenomicsAotearoa/hts_workshop_mpi
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Level1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Level1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/11_nesi_connection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1 - Connecting to NeSI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/12_shell_navigation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2 - Introducing the shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/13_shell_manipulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.3 - Manipulating files in the shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/21_illumina_inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 - Assesing Illumina data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/22_illumina_filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2 - Filtering Illumina data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/31_nanopore_inspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2 - Assesing Nanopore data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/32_nanopore_filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2 - Filtering Nanopore data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/41_blastn_annotation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1 - Annotating with BLAST
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/42_slurm_introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2 - Introduction to slurm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level1/43_blast_interpretation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3 - Interpreting BLAST results
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Level2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Level2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11_shell_manipulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.1 - Manipulating files in the shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12_shell_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.2 - Working with variables and loops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    1.3 - Working with redirection
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    1.3 - Working with redirection
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Objectives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Keypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-output-to-a-new-file" class="md-nav__link">
    <span class="md-ellipsis">
      Redirecting output to a new file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redirecting output to a new file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applying-redirection-to-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Applying redirection to loops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Applying redirection to loops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-appending-redirection" class="md-nav__link">
    <span class="md-ellipsis">
      Using appending redirection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-variables-in-the-output-file-name" class="md-nav__link">
    <span class="md-ellipsis">
      Using variables in the output file name
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-output-to-a-different-command" class="md-nav__link">
    <span class="md-ellipsis">
      Redirecting output to a different command
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14_nesi_environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.4 - The NeSI computing environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21_assembly_de_novo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 - Genome Assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22_assembly_spades/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2 - Assembling short-read Illumina data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23_assembly_flye/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3 - Assembling Oxford Nanopore data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24_assembly_evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3 - Evaluating the results of an assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25_assembly_polishing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5 - Polishing of Oxford Nanopore assemblies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31_coverage_mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.1 - Overview of mapping sequences to a reference genome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../32_illumina_mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.2 - Mapping Illumina sequences to a reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33_nanopore_mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.3 - Mapping Oxford Nanopore sequences to a reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34_mapping_filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.4 - Filtering and compressing sam files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35_mapping_statistics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.5 - Summarising coverage information from a mapping file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../41_annotation_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.1 - Prediction of protein coding sequences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../42_annotation_prodigal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.2 - Prediction with prodigal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../43_annotation_augustus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.3 - Prediction with AUGUSTUS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../44_annotation_protein/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.4 - Protein annotation with BLAST-like methods
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../45_annotation_kraken2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.5 - Classification of sequences with k-mer composition profiles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Proficiency
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Proficiency
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../proficiency/2023_proficiency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023 Level 2 proficiency testing (version 1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../proficiency/2023_proficiency_alternate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2023 Level 2 proficiency testing (version 2)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Supplementary
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Supplementary
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../supplementary/common_terms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common terms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../supplementary/fastq_format/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The FASTQ file format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../supplementary/slurm_module_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Slurm module guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Objectives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Keypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-output-to-a-new-file" class="md-nav__link">
    <span class="md-ellipsis">
      Redirecting output to a new file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redirecting output to a new file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applying-redirection-to-loops" class="md-nav__link">
    <span class="md-ellipsis">
      Applying redirection to loops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Applying redirection to loops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-appending-redirection" class="md-nav__link">
    <span class="md-ellipsis">
      Using appending redirection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-variables-in-the-output-file-name" class="md-nav__link">
    <span class="md-ellipsis">
      Using variables in the output file name
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-output-to-a-different-command" class="md-nav__link">
    <span class="md-ellipsis">
      Redirecting output to a different command
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="13-working-with-redirection">1.3 - Working with redirection<a class="headerlink" href="#13-working-with-redirection" title="Permanent link">¶</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<div class="admonition clock">
<p class="admonition-title">time</p>
<ul>
<li>Teaching: 15 minutes</li>
<li>Exercises: 15 minutes</li>
</ul>
</div>
<div class="admonition circle-info">
<p class="admonition-title">Objectives and Key points</p>
<h4 id="objectives">Objectives<a class="headerlink" href="#objectives" title="Permanent link">¶</a></h4>
<ul>
<li>Understand the basic idea or shell redirection and what can be done with it.</li>
<li>Understand the differences between redirecting to a file and another command.</li>
<li>Know that different command line tools can be linked together to produce complex operations.</li>
</ul>
<h4 id="keypoints">Keypoints<a class="headerlink" href="#keypoints" title="Permanent link">¶</a></h4>
<ul>
<li>When a command on the shell is printing information to the terminal, we can capture and redirect that information to a new location or into a new command.</li>
<li>When redirecting to a file, we can create a new file, overwrite an existing file, or append to an existing file.</li>
<li>Each channel can be independently captured and directed to a new location. SUch locations include:</li>
</ul>
</div>
<hr>
<h2 id="redirecting-output-to-a-new-file">Redirecting output to a new file<a class="headerlink" href="#redirecting-output-to-a-new-file" title="Permanent link">¶</a></h2>
<p>In the previous session we were using the <code>grep</code> command allowed us to identify sequences in fastq files that matched particular patterns. All of these sequences were printed to our terminal screen which wasn't particularly helpful so what we're now going to do is learn how to capture that output in a more useful manner.</p>
<p>We can do this with something called <strong>redirection</strong>. The idea is that we are taking what would ordinarily be printed to the terminal screen and redirecting it to another location. In our case, we want to move the information printed on our terminal into a file so that we can look at it later.</p>
<p>Navigate to the <code>redirection/</code> folder and we'll get started.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>/nesi/project/nesi03181/phel/USERNAME/level2/redirection/
</code></pre></div>
</div>
<p>The command for redirecting output to a file is <kbd>&gt;</kbd>. Let's revisit our example using the <code>${MOTIF}</code> variable to represent the sequence motif we want to capture and we'll redirect the output of the search into a new file.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">MOTIF</span><span class="o">=</span><span class="s2">"NNNNNNNNNN"</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>grep<span class="w"> </span><span class="si">${</span><span class="nv">MOTIF</span><span class="si">}</span><span class="w"> </span>SRR098026.fastq<span class="w"> </span>&gt;<span class="w"> </span>my_file.txt
</code></pre></div>
</div>
<p>This might take a second or two to complete, but when it is done a quick <code>ls</code> should show you a new file called <code>my_file.txt</code>. This file did not exist before, but the <kbd>&gt;</kbd> symbol when performing redirection is understood by the computer to mean that a new file must be created with the name corresponding to the text which follows the <kbd>&gt;</kbd> character.</p>
<div class="admonition warning">
<p class="admonition-title">Overwriting files</p>
<p>If you redirect into an existing file using this method, the old file contents will be replaced with the new values. You will lose the data permanently so make sure you are redirecting data to the correct place.</p>
</div>
<div class="admonition note">
<p class="admonition-title">File extensions</p>
<p>You might notice that we have used the file extension <code>.txt</code> in the output file rather than <code>.fastq</code>. This is largely semantics, in the command line environment the extensions to files generally have no meaning to the computer, they are for the user to help identify the expected contents of the file in question.</p>
<p>In this instance, we are using a different extension as the <code>grep</code> command will only extract the lines (sequences) with the <code>${MOTIF}</code> value and not the sequence name or quality information so it will no longer be recognised as a <code>fastq</code> file.</p>
</div>
<p>Comparing the contents of the input and output files from the <code>grep</code> command reveals some differences:</p>
<details class="file-code">
<summary>First 10 lines of <code>SRR098026.fastq</code></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>@SRR098026.1 HWUSI-EAS1599_1:2:1:0:968 length=35
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>NNNNNNNNNNNNNNNNCNNNNNNNNNNNNNNNNNN
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>+SRR098026.1 HWUSI-EAS1599_1:2:1:0:968 length=35
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>!!!!!!!!!!!!!!!!#!!!!!!!!!!!!!!!!!!
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>@SRR098026.2 HWUSI-EAS1599_1:2:1:0:312 length=35
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>NNNNNNNNNNNNNNNNANNNNNNNNNNNNNNNNNN
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>+SRR098026.2 HWUSI-EAS1599_1:2:1:0:312 length=35
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>!!!!!!!!!!!!!!!!#!!!!!!!!!!!!!!!!!!
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>@SRR098026.3 HWUSI-EAS1599_1:2:1:0:570 length=35
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>NNNNNNNNNNNNNNNNANNNNNNNNNNNNNNNNNN
</code></pre></div>
</details>
<details class="file-code">
<summary>First 10 lines of <code>my_file.txt</code></summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>NNNNNNNNNNNNNNNNCNNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>NNNNNNNNNNNNNNNNANNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>NNNNNNNNNNNNNNNNANNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>NNNNNNNNNNNNNNNNANNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>NNNNNNNNNNNNNNNNGNNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>NNNNNNNNNNNNNNNNGNNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>NNNNNNNNNNNNNNNNGNNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>NNNNNNNNNNNNNNNNANNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>NNNNNNNNNNNNNNNNGNNNNNNNNNNNNNNNNNN
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>NNNNNNNNNNNNNNNNGNNNNNNNNNNNNNNNNNN
</code></pre></div>
</details>
<hr>
<h3 id="applying-redirection-to-loops">Applying redirection to loops<a class="headerlink" href="#applying-redirection-to-loops" title="Permanent link">¶</a></h3>
<p>We previously created a dynamic loop that searched a single, hardcoded file and printed the results of a <code>grep</code> call. We could use what we have seen above to redirect the outputs of this search to a file, but is this a good idea?</p>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Consider this revised version of the <code>for</code> loop from the previous session (<a href="../12_shell_variables/#extending-our-loop-with-multiple-variables">notes here</a>), which loops through a number of values for <code>${MOTIF}</code> and writes the results to a file using redirection.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nv">FILENAME</span><span class="o">=</span>SRR098026.fastq
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">for</span><span class="w"> </span>MOTIF<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"NNNNNNNNNN"</span><span class="w"> </span><span class="s2">"GCTGGCGNNN"</span><span class="w"> </span><span class="s2">"TTTTTTTTTT"</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">do</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span>grep<span class="w"> </span>-B1<span class="w"> </span>-A2<span class="w"> </span><span class="si">${</span><span class="nv">MOTIF</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">FILENAME</span><span class="si">}</span><span class="w"> </span>&gt;<span class="w"> </span>my_file.fastq
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="k">done</span>
</code></pre></div>
</div>
<p>After the loop completes and the <code>grep</code> search has run three times, what are the final contents of the output file and why?</p>
<ol>
<li>The results from all <code>grep</code> searches.</li>
<li>The results from the first <code>grep</code> search.</li>
<li>The results from the second <code>grep</code> search.</li>
<li>The results from the last <code>grep</code> search.</li>
</ol>
<details class="circle-check">
<summary>Solution</summary>
<ol>
<li>Ony the results from the last search will be shown in <code>my_file.fastq</code>, as each iteration of the loop overwrites the contents of the file using the <code>&gt;</code> operator.</li>
</ol>
</details>
</div>
<p>This is a problem because we may need to record the results of multiple searches, or even search multiple <code>fastq</code> files and report each set of results independently. There are two ways to deal with this and the best option depends on your requirements.</p>
<h4 id="using-appending-redirection">Using appending redirection<a class="headerlink" href="#using-appending-redirection" title="Permanent link">¶</a></h4>
<p>The first modification we can make is to replace the redirection operator <code>&gt;</code> with the appending operator <code>&gt;&gt;</code>. This is a small change but now the results from each iteration of the loop will be added to the end of the output <code>fastq</code> file instead of replacing the current contents.</p>
<p>Write the following loop and see how the outputs differ.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nv">FILENAME</span><span class="o">=</span>SRR098026.fastq
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">for</span><span class="w"> </span>MOTIF<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"NNNNNNNNNN"</span><span class="w"> </span><span class="s2">"GCTGGCGNNN"</span><span class="w"> </span><span class="s2">"TTTTTTTTTT"</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">do</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span>grep<span class="w"> </span>-B1<span class="w"> </span>-A2<span class="w"> </span><span class="si">${</span><span class="nv">MOTIF</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">FILENAME</span><span class="si">}</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>my_appended_file.fastq
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="k">done</span>
</code></pre></div>
</div>
<h4 id="using-variables-in-the-output-file-name">Using variables in the output file name<a class="headerlink" href="#using-variables-in-the-output-file-name" title="Permanent link">¶</a></h4>
<p>If you wanted an output where all of your search motifs were placed into a single file, that approach is fine. However, it is equally likely that we will not want this outcome and will instead want to create different output files for each motif searched. Try to incorporate this into your existing loop.</p>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Modify your loop above to create individual files according to the value of <code>${MOTIF}</code>. You can use either the overwriting (<code>&gt;</code>) of appending (<code>&gt;&gt;</code>) operator.</p>
<details class="circle-check">
<summary>Solution</summary>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nv">FILENAME</span><span class="o">=</span>SRR098026.fastq
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">for</span><span class="w"> </span>MOTIF<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">"NNNNNNNNNN"</span><span class="w"> </span><span class="s2">"GCTGGCGNNN"</span><span class="w"> </span><span class="s2">"TTTTTTTTTT"</span><span class="p">;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">do</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span>grep<span class="w"> </span>-B1<span class="w"> </span>-A2<span class="w"> </span><span class="si">${</span><span class="nv">MOTIF</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">FILENAME</span><span class="si">}</span><span class="w"> </span>&gt;<span class="w"> </span>my_file.<span class="si">${</span><span class="nv">MOTIF</span><span class="si">}</span>.fastq
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">done</span>
</code></pre></div>
</div>
</details>
</div>
<hr>
<h2 id="redirecting-output-to-a-different-command">Redirecting output to a different command<a class="headerlink" href="#redirecting-output-to-a-different-command" title="Permanent link">¶</a></h2>
<p>Capturing outputs in a file is a very useful technique when working on the command line. However, when we are using a command line tool to process files we often run into the problem that there is no single tool powerful enough to do all the things we need in a single operation. This is largely part of the design philosophy behind command line tools - they should be very good at one thing, but only really do that one thing.</p>
<p>There is then a form of redirection to pass the output of one tool directly into another, which allows us to chain together multiple different commands into a more powerful pipeline.</p>
<p>We will not cover all of the command line tools that exist on NeSI, but here are a few of the commonly used ones and when you might need to use them.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Tool</th>
<th style="text-align: left;">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>grep</code></td>
<td style="text-align: left;">Search a file for a keyword, or set of keywords</td>
</tr>
<tr>
<td style="text-align: center;"><code>sed</code></td>
<td style="text-align: left;">Search a file for a keyword, or set of keywords, and replace them with a new value</td>
</tr>
<tr>
<td style="text-align: center;"><code>cat</code></td>
<td style="text-align: left;">Print the content of a file to the terminal</td>
</tr>
<tr>
<td style="text-align: center;"><code>head</code></td>
<td style="text-align: left;">Print the first N lines of a file to the terminal</td>
</tr>
<tr>
<td style="text-align: center;"><code>tail</code></td>
<td style="text-align: left;">Print the last N lines of a file to the terminal</td>
</tr>
<tr>
<td style="text-align: center;"><code>sort</code></td>
<td style="text-align: left;">Sort the contents of a file alphabetically</td>
</tr>
<tr>
<td style="text-align: center;"><code>uniq</code></td>
<td style="text-align: left;">Print the unique occurences in a stream of text entries</td>
</tr>
<tr>
<td style="text-align: center;"><code>cut</code></td>
<td style="text-align: left;">Extract a specific set of columns from a tab (default) or overwise delimited text file</td>
</tr>
</tbody>
</table>
<details class="note">
<summary>The <code>uniq</code> command</summary>
<p>The <code>uniq</code> command is basically as described above - from a set of entries it will print out the unique occurences but it works by comparing the current entry in a sequence and testing whether or not it is the same as the last entry.</p>
<p>This is not necessarily how you might expect it to work. A common assumption is that it will compare the current entry against <em>all previously observed entries</em> but this is not the case. To see the difference in action, consider a file with the following values:</p>
<div class="admonition file-code">
<p class="admonition-title">Input file</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>a
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>a
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>a
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>b
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>b
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>c
</code></pre></div>
</div>
<p>If we were to run this through <code>uniq</code> we would see the following:</p>
<div class="admonition success">
<p class="admonition-title">Output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>a
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>b
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>c
</code></pre></div>
</div>
<p>Which is pretty much as expected. However, if the content was instead:</p>
<div class="admonition file-code">
<p class="admonition-title">Input file</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>a
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>a
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>a
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>b
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>b
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>c
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>a
</code></pre></div>
</div>
<div class="admonition success">
<p class="admonition-title">Output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>a
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>b
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>c
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>a
</code></pre></div>
</div>
<p>This is because <code>uniq</code> keeps no record that it has previously seen an <code>a</code> value. When it hits the last line of the file and encounters the <code>a</code> it only tests if that <code>a</code> matches the value of the previous line, which was a <code>c</code>. Since they do not match, the <code>a</code> is reported. This means that we must sort the information in our text stream before passing it into <code>uniq</code> if we want to see only the unique pieces of information.</p>
</details>
<p>We are going to write a command that chains together three of the commands above to produce a basic summary of a table of information. In the <code>redirection/</code> folder there is a table called <code>ncbi_viruses.txt</code> which is a non-exhaustive list of the virus names recorded in the <a href="https://www.ncbi.nlm.nih.gov/taxonomy/">NCBI taxonomy</a> database. It's a big file (22,387 lines) so we're going to build a set of commands to perform a quick summary of some of the information it contains.</p>
<p>If you run a quick <code>less</code> (remembering <kdb>Q</kdb> to quit) or <code>head</code> command you will see that the contents look something like</p>
<div class="admonition success">
<p class="admonition-title">Output</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>taxid   Kingdom Phylum  Class   Order   Family  Genus   Species
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>2716741 Viruses Pisuviricota    Pisoniviricetes Picornavirales  Iflaviridae     Iflavirus       ACT flea iflavirus
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>1244521 Viruses Negarnaviricota Ellioviricetes  Bunyavirales    Hantaviridae    Orthohantavirus ANAJ Hantavirus
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>1482734 Viruses Pisuviricota    Pisoniviricetes Picornavirales  Picornaviridae  Aalivirus       Aalivirus A
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>2320189 Viruses Uroviricota     Caudoviricetes  unclassified    Autographiviridae       Aarhusvirus     Aarhusvirus dagda
</code></pre></div>
</div>
<p>The rendering of the contents is a bit uneven, but each text value is separated by a <kdb>Tab</kdb> character so if you copied this data into Excel you would see the values as a table:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">taxid</th>
<th style="text-align: center;">Kingdom</th>
<th style="text-align: center;">Phylum</th>
<th style="text-align: center;">Class</th>
<th style="text-align: center;">Order</th>
<th style="text-align: center;">Family</th>
<th style="text-align: center;">Genus</th>
<th style="text-align: center;">Species</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">2716741</td>
<td style="text-align: center;">Viruses</td>
<td style="text-align: center;">Pisuviricota</td>
<td style="text-align: center;">Pisoniviricetes</td>
<td style="text-align: center;">Picornavirales</td>
<td style="text-align: center;">Iflaviridae</td>
<td style="text-align: center;">Iflavirus</td>
<td style="text-align: center;">ACT flea iflavirus</td>
</tr>
<tr>
<td style="text-align: center;">1244521</td>
<td style="text-align: center;">Viruses</td>
<td style="text-align: center;">Negarnaviricota</td>
<td style="text-align: center;">Ellioviricetes</td>
<td style="text-align: center;">Bunyavirales</td>
<td style="text-align: center;">Hantaviridae</td>
<td style="text-align: center;">Orthohantavirus</td>
<td style="text-align: center;">ANAJ Hantavirus</td>
</tr>
<tr>
<td style="text-align: center;">1482734</td>
<td style="text-align: center;">Viruses</td>
<td style="text-align: center;">Pisuviricota</td>
<td style="text-align: center;">Pisoniviricetes</td>
<td style="text-align: center;">Picornavirales</td>
<td style="text-align: center;">Picornaviridae</td>
<td style="text-align: center;">Aalivirus</td>
<td style="text-align: center;">Aalivirus A</td>
</tr>
<tr>
<td style="text-align: center;">2320189</td>
<td style="text-align: center;">Viruses</td>
<td style="text-align: center;">Uroviricota</td>
<td style="text-align: center;">Caudoviricetes</td>
<td style="text-align: center;">unclassified</td>
<td style="text-align: center;">Autographiviridae</td>
<td style="text-align: center;">Aarhusvirus</td>
<td style="text-align: center;">Aarhusvirus dagda</td>
</tr>
</tbody>
</table>
<p>Our aim here is to use the commands mentioned above to perform a quick tally of the genera within the family <em>Potyviridae</em>. This will require us to perform the following steps:</p>
<ol>
<li>Select only the rows which contain the value 'Potyviridae'.</li>
<li>Extract the values from the column corresponding to 'Genus'.</li>
<li>Identify the unique genera within the column.</li>
</ol>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Before we proceed have a quick look through the tools listed above and try to identify which tools can be used for each step.</p>
<details class="circle-check">
<summary>Solution</summary>
<ol>
<li><code>grep</code></li>
<li><code>cut</code></li>
<li><code>uniq</code>, combined with <code>sort</code> (see notes on <code>uniq</code> above)</li>
</ol>
</details>
</div>
<p>When we redirect from one tool to another, we use the pipe character (<code>|</code>). This is probably not a key on your keyboard you use very much, so let's take a minute to find that key.</p>
<p>For the standard QWERTY keyboard layout, the <code>|</code> character can be found using the key combination <kbd>Shift</kbd>+<kbd>\</kbd>. Rather than direct to a file location, this now captures the printed output and directs it to an input channel of the command that follows the pipe operator.</p>
<p>For example, if we are passing the output of the <code>grep</code> command to find lines in the table with the term 'Potyviridae' and want to pass it into the <code>cut</code> command, it will look like:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>grep<span class="w"> </span><span class="s2">"Potyviridae"</span><span class="w"> </span>ncbi_viruses.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>&lt;next<span class="w"> </span>command&gt;
</code></pre></div>
</div>
<p>From there we can provide <code>cut</code> with the parameters we need and then either direct its output to a file (<code>&gt;</code>) or to another command (<code>|</code>). In this instance we only have a single parameter to provide <code>cut</code> and that is which column(s) we want it to extract from the input data. This is done with the <code>-f</code> parameter which takes the column position (not label) that we want to retain. You can provide multiple values to <code>-f</code>, separated with a comma, but in this case we will only need the one.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>grep<span class="w"> </span><span class="s2">"Potyviridae"</span><span class="w"> </span>ncbi_viruses.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f7<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort
</code></pre></div>
</div>
<details class="success">
<summary>Output (last 10 lines)</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Roymovirus
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>Rymovirus
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>Rymovirus
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>Rymovirus
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>Tritimovirus
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>Tritimovirus
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>Tritimovirus
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>Tritimovirus
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>Tritimovirus
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>Tritimovirus
</code></pre></div>
</details>
<p>And that's most of the command we need. The initial file is filtered for lines that contain the text 'Potyviridae', those lines are passed into the <code>cut</code> command which extracts just the information in the genus column. The results are then alphabetically sorted and <code>uniq</code> reports the unique names found.</p>
<p>The only thing we need to do to complete the exercise is to report how many of each genus were found.</p>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Search the manual for <code>uniq</code> and find the parameter required to print out the number of observations for each unique entry.</p>
<details class="circle-check">
<summary>Solution</summary>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>grep<span class="w"> </span>Potyviridae<span class="w"> </span>ncbi_viruses.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f7<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c
</code></pre></div>
</div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>2 Arepavirus
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>1 Bevemovirus
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>1 Brambyvirus
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>7 Bymovirus
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>1 Celavirus
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>9 Ipomovirus
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>14 Macluravirus
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>3 Poacevirus
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>316 Potyvirus
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>2 Roymovirus
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>3 Rymovirus
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>6 Tritimovirus
</code></pre></div>
</details>
</details>
</div>
<hr>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../12_shell_variables/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 1.2 - Working with variables and loops">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                1.2 - Working with variables and loops
              </div>
            </div>
          </a>
        
        
          
          <a href="../14_nesi_environment/" class="md-footer__link md-footer__link--next" aria-label="Next: 1.4 - The NeSI computing environment">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                1.4 - The NeSI computing environment
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Intermediate Shell for Bioinformatics workshop material is licensed under a <a rel="noopener" target="_blank" href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License v3.0</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "content.code.copy", "content.code.annotate", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>